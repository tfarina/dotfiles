#!/bin/bash
#
# Copyright (c) 2013, Thiago Farina
#
# 2013-07-13 Thiago Farina <tfarina@chromium.org>
#
# Die if any command dies.
set -e

# Default build mode is Debug.
BUILD_MODE=Debug

NUM_JOBS="$(grep -c "^processor" /proc/cpuinfo)"

# Default target is chrome.
TARGETS="$@"

if [ -z "$TARGETS" ]; then
  TARGETS="chrome"
fi

# gets the location (absolute path) of this script, the directory.
XCTOOL_DIR=$(cd $(dirname $0); pwd)

# We can't run this script from anywhere, just inside ~/chromium/src/
# TODO: Fix this!

time ninja -C out_cros/"${BUILD_MODE}" -k4 -j"${NUM_JOBS}" $TARGETS 2>&1 | tee errors
